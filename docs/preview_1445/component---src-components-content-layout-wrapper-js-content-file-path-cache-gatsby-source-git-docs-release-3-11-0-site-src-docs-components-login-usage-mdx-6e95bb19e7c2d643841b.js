"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[25271],{77471:function(e,n,t){var l=t(96540),a=t(19474),r=t(48048);n.A=e=>{let{children:n,...t}=e;return l.createElement(a.N,t,(0,r.l)(n))}},65482:function(e,n,t){var l=t(96540),a=t(87469),r=t(48048);n.A=e=>{let{children:n,...t}=e;return l.createElement(a.S,t,(0,r.l)(n))}},68147:function(e,n,t){var l=t(96540),a=t(67464);n.A=()=>{const e={Draft:"The component is work in progress",Beta:"The component is being tested",Stable:"The component has been tested and defects have been fixed",Accessible:"The component has been reviewed for accessibility",Deprecated:"The component will be removed"};return l.createElement(a.T,{placement:"right-end",className:"status-label-tooltip",boxShadow:!0},l.createElement("ul",{className:"status-label-definitions"},Object.keys(e).map((n=>l.createElement("li",{key:n},l.createElement("span",{className:"status-name"},n),l.createElement("span",null,e[n]))))))}},57650:function(e,n,t){var l=t(28453),a=t(96540),r=t(68147),i=t(4998),s=t(78623),o=(t(77471),t(65482));function c(e){const n=Object.assign({h1:"h1",a:"a",span:"span",p:"p"},(0,l.RP)(),e.components);return s.A||d("PageTabs",!1),s.A.Tab||d("PageTabs.Tab",!0),s.A.TabList||d("PageTabs.TabList",!0),s.A.TabPanel||d("PageTabs.TabPanel",!0),a.createElement(a.Fragment,null,a.createElement(n.h1,{id:"login",style:{position:"relative"}},"Login",a.createElement(n.a,{href:"#login","aria-label":"login permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement("div",{className:"status-label-description"},a.createElement(o.A,{type:"error"},"Draft"),a.createElement(o.A,{type:"success",style:{marginLeft:"var(--spacing-xs)"}},a.createElement(n.p,null,"Accessible")),a.createElement(r.A)),"\n",a.createElement(i.A,null,a.createElement(n.p,null,"Login components include React components, context and hooks for handling user authorisation, api tokens, session\npolling and GraphQL queries.")),"\n",a.createElement(s.A,{pageContext:e.pageContext},a.createElement(s.A.TabList,null,a.createElement(s.A.Tab,{href:"/"},"Intro"),a.createElement(s.A.Tab,{href:"/usage"},"Usage"),a.createElement(s.A.Tab,{href:"/api"},"API"),a.createElement(s.A.Tab,{href:"/accessibility"},"Accessibility"),a.createElement(s.A.Tab,{href:"/customisation"},"Customisation")),a.createElement(s.A.TabPanel,null,e.children)))}function d(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}n.A=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,l.RP)(),e.components);return n?a.createElement(n,e,a.createElement(c,e)):c(e)}},72337:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var l=t(28453),a=t(96540),r=t(63301),i=t(57650),s=(t(55785),t(64187)),o=t(95281);const c=e=>{let{children:n,pageContext:t}=e;return a.createElement(i.A,{pageContext:t},n)},d=e=>{let{anchor:n,children:t}=e;return a.createElement(o.A,{path:"/components/login/api",anchor:n},t)};function h(e){const n=Object.assign({h2:"h2",a:"a",span:"span",h3:"h3",ul:"ul",li:"li",p:"p",h4:"h4",pre:"pre",code:"code",strong:"strong",h5:"h5",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,l.RP)(),e.components),{IconCheckCircleFill:t,Link:i,IconCrossCircle:c}=n;return t||m("IconCheckCircleFill",!0),c||m("IconCrossCircle",!0),i||m("Link",!0),a.createElement(a.Fragment,null,a.createElement(n.h2,{id:"usage",style:{position:"relative"}},"Usage",a.createElement(n.a,{href:"#usage","aria-label":"usage permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.h3,{id:"table-of-contents",style:{position:"relative"}},"Table of contents",a.createElement(n.a,{href:"#table-of-contents","aria-label":"table of contents permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"Components"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"Important"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"LoginButton"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"LoginCallbackHandler"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"LoginProvider"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"SessionEndedHandler"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"WithAuthentication"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"WithAuthenticatedUser"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"WithoutAuthenticatedUser"),"\n"),"\n"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"Oidc client hooks"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useAuthenticatedUser"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useCachedAmr"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useOidcClient"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useOidcClientTracking"),"\n"),"\n"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"Api tokens client hooks"),"\n"," ","\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useApiTokens"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useApiTokensClient"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useApiTokensClientTracking"),"\n"),"\n"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"Session poller hooks"),"\n"," ","\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useSessionPoller"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useSessionPollerTracking"),"\n"),"\n"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"GraphQL module hooks"),"\n"," ","\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useGraphQLModule"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useGraphQLModuleTracking"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useGraphQL"),"\n"),"\n"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"Generic signal hooks"),"\n"," ","\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useSignalListener"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useSignalTrackingWithCallback"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useSignalTrackingWithReturnValue"),"\n"),"\n"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"Modules"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"Oidc Client"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"Api tokens client"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"Session poller"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"GraphQL module"),"\n"),"\n"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"Silent renewal"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"Signals"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"Listening to signals"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"Getting signal payloads"),"\n"),"\n"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"Using without React"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"Packages"),"\n"),"\n"),"\n",a.createElement(n.h3,{id:"components",style:{position:"relative"}},"Components",a.createElement(n.a,{href:"#components","aria-label":"components permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"HDS login components cover most use cases and also handle errors when logging in or getting tokens."),"\n",a.createElement(n.p,null,"Detailed information about all properties of each component is listed on the ",a.createElement(d,{anchor:"components"},"API page"),"."),"\n",a.createElement(n.h4,{id:"important",style:{position:"relative"}},"Important",a.createElement(n.a,{href:"#important","aria-label":"important permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"All components and hooks require a ",a.createElement(o.A,null,"LoginProvider")," to provide context for them."),"\n",a.createElement(n.h4,{id:"loginbutton",style:{position:"relative"}},"LoginButton",a.createElement(n.a,{href:"#loginbutton","aria-label":"loginbutton permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"This component handles the redirection to the OIDC server and also errors if the server rejects the request for ",a.createElement(s.A,{href:"https://tunnistamo.dev.hel.ninja/.well-known/openid-configuration"},"OpenID configuration"),"."),"\n",a.createElement(n.p,null,"Button text is passed and rendered as a child."),"\n",a.createElement(r.Ay,null,a.createElement(n.pre,null,a.createElement(n.code,{className:"language-jsx"},'<LoginButton errorText="Login failed. Try again!" loggingInText="Logging in">\n  Log in\n</LoginButton>\n'))),"\n",a.createElement(n.p,null,"All component properties are listed on the ",a.createElement(d,{anchor:"loginbutton"},"API page"),"."),"\n",a.createElement(n.h4,{id:"logincallbackhandler",style:{position:"relative"}},"LoginCallbackHandler",a.createElement(n.a,{href:"#logincallbackhandler","aria-label":"logincallbackhandler permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"This component handles the response when the OIDC server redirects the browser back to the given callback route. When the response is parsed, the browser is usually redirected to another path."),"\n",a.createElement(r.Ay,null,a.createElement(n.pre,null,a.createElement(n.code,{className:"language-jsx"},"const onSuccess = (user: User) => {\n  // Handle successful login\n  // Usually redirect to a page\n};\nconst onError = (error: OidcClientError) => {\n  //Handle error\n};\nreturn (\n  <LoginProvider {...providerProperties}>\n    <LoginCallbackHandler onSuccess={onSuccess} onError={onError}>\n      <div>Logging in...</div>\n    </LoginCallbackHandler>\n  </LoginProvider>\n);\n"))),"\n",a.createElement(n.p,null,"All component properties are listed on the ",a.createElement(d,{anchor:"logincallbackhandler"},"API page"),". See also a note about ",a.createElement(n.code,null,"isHandlingLoginCallbackError(error)"),"."),"\n",a.createElement(n.h4,{id:"loginprovider",style:{position:"relative"}},"LoginProvider",a.createElement(n.a,{href:"#loginprovider","aria-label":"loginprovider permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"This component creates a React context and initialises all modules. All components and hooks are required to render inside the LoginProvider or React Context will throw an error.\nPosition the context in the component tree like any other React context."),"\n",a.createElement(n.p,null,"The value of context does not change every time one of its modules changes. Therefore, it does not cause re-renders, so it can be at the top level. For example, if user data or API tokens are renewed, the value of the context is not updated. Only its modules. This way, the application using the LoginProvider is not constantly re-rendered."),"\n",a.createElement(n.p,null,"Up-to-date user data or API tokens can be accessed from the modules with hooks."),"\n",a.createElement(n.p,null,"The ",a.createElement(o.A,null,"useSignalListener")," can be used to update a component when a module of the LoginProvider changes."),"\n",a.createElement(r.Ay,null,a.createElement(n.pre,null,a.createElement(n.code,{className:"language-jsx"},"const providerProperties: LoginProviderProps = {\n  userManagerSettings: {\n    authority: 'https://tunnistamo.dev.hel.ninja/',\n    client_id: 'exampleapp-ui-dev',\n    scope: 'openid profile email',\n    redirect_uri: 'https://service.fi/callback',\n  },\n  apiTokensClientSettings: { url: 'https://tunnistamo.dev.hel.ninja/api-tokens/' },\n  sessionPollerSettings: { pollIntervalInMs: 300000 },\n};\n\nconst MyApp = () => {\n  const { isAuthenticated, getUser, logout } = useOidcClient();\n  const { getApiTokens } = useApiTokens();\n  const { addListener } = useSignalListener();\n  if (isAuthenticated()) {\n    return (\n      <>\n        <p>Hello, {user.name}!</p>\n        <Button onClick={() => logout()}>Log out</Button>\n      </>\n    );\n  } else {\n    return (\n      <>\n        <p>You are not logged in.</p>\n        <LoginButton errorText=\"Login failed. Try again!\">Log in</LoginButton>\n      </>\n    );\n  }\n};\n\n<LoginProvider {...providerProperties}>\n  <MyApp />\n</LoginProvider>;\n"))),"\n",a.createElement(n.p,null,"All component properties are listed on the ",a.createElement(d,{anchor:"loginprovider"},"API page"),"."),"\n",a.createElement(n.h4,{id:"sessionendedhandler",style:{position:"relative"}},"SessionEndedHandler",a.createElement(n.a,{href:"#sessionendedhandler","aria-label":"sessionendedhandler permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"This component listens to the session-ended signal. It is emitted from the ",a.createElement(o.A,null,"Session poller"),", if it receives a response indicating the user's session has ended. Then the component shows an HDS Dialog and forces the user to log out. The Dialog can be seen in the ",a.createElement(s.A,{href:"/storybook/react/?path=/story/components-login--example-application"},"Storybook"),".\nThis component can be placed anywhere inside the ",a.createElement(o.A,null,"LoginProvider"),"."),"\n",a.createElement(r.Ay,null,a.createElement(n.pre,null,a.createElement(n.code,{className:"language-jsx"},"<SessionEndedHandler\n  content={{\n    title: 'Session has ended!',\n    text: 'Your session on the server has ended. You will be logged out in this window too.',\n    buttonText: 'Logout',\n    closeButtonLabelText: 'Logout',\n  }}\n/>\n"))),"\n",a.createElement(n.p,null,"All component properties are listed on the ",a.createElement(d,{anchor:"sessionendedhandler"},"API page"),"."),"\n",a.createElement(n.h4,{id:"withauthentication",style:{position:"relative"}},"WithAuthentication",a.createElement(n.a,{href:"#withauthentication","aria-label":"withauthentication permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Component for rendering components conditionally, depending on whether the user is authenticated or not."),"\n",a.createElement(r.Ay,null,a.createElement(n.pre,null,a.createElement(n.code,{className:"language-jsx"},'const HelloUser = ({ user }: { user: User }) => {\n  return <p>Hello, {user.name}!</p>;\n};\n\nconst LoginComponent = () => {\n  return <LoginButton errorText="Login failed. Try again!">Log in</LoginButton>;\n};\n\n<WithAuthentication AuthorisedComponent={HelloUser} UnauthorisedComponent={LoginComponent} />;\n'))),"\n",a.createElement(n.p,null,"All component properties are listed on the ",a.createElement(d,{anchor:"withauthentication"},"API page"),"."),"\n",a.createElement(n.h4,{id:"withauthenticateduser",style:{position:"relative"}},"WithAuthenticatedUser",a.createElement(n.a,{href:"#withauthenticateduser","aria-label":"withauthenticateduser permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Renders its children only if the user is authenticated. Uses ",a.createElement(o.A,null,"WithAuthentication,")," but allows multiple children."),"\n",a.createElement(r.Ay,null,a.createElement(n.pre,null,a.createElement(n.code,{className:"language-jsx"},"<WithAuthenticatedUser>\n  <p>This is rendered, if the user is authenticated</p>\n</WithAuthenticatedUser>\n"))),"\n",a.createElement(n.p,null,"All component properties are listed on the ",a.createElement(d,{anchor:"withauthenticateduser"},"API page"),"."),"\n",a.createElement(n.h4,{id:"withoutauthenticateduser",style:{position:"relative"}},"WithoutAuthenticatedUser",a.createElement(n.a,{href:"#withoutauthenticateduser","aria-label":"withoutauthenticateduser permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Renders its children only if the user is not authenticated. Uses ",a.createElement(o.A,null,"WithAuthentication,")," but allows multiple children."),"\n",a.createElement(r.Ay,null,a.createElement(n.pre,null,a.createElement(n.code,{className:"language-jsx"},"<WithoutAuthenticatedUser>\n  <p>This is rendered, if the user is not authenticated</p>\n</WithoutAuthenticatedUser>\n"))),"\n",a.createElement(n.p,null,"All component properties are listed on the ",a.createElement(d,{anchor:"withoutauthenticateduser"},"API page"),"."),"\n",a.createElement(n.h3,{id:"oidc-client-hooks",style:{position:"relative"}},"Oidc client hooks",a.createElement(n.a,{href:"#oidc-client-hooks","aria-label":"oidc client hooks permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"More detailed information about ",a.createElement(o.A,null,"Oidc client")," hooks is listed on the ",a.createElement(d,{anchor:"oidc-client-hooks"},"API page"),"."),"\n",a.createElement(n.h4,{id:"useauthenticateduser",style:{position:"relative"}},"useAuthenticatedUser",a.createElement(n.a,{href:"#useauthenticateduser","aria-label":"useauthenticateduser permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Returns a user object if the object is valid, authenticated and passes the ",a.createElement(d,{anchor:"other-exported-utility-functions"},"isValidUser()")," check."),"\n",a.createElement(n.h4,{id:"usecachedamr",style:{position:"relative"}},"useCachedAmr",a.createElement(n.a,{href:"#usecachedamr","aria-label":"usecachedamr permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Returns the user's amr value. It is cached because in some cases it must be decrypted from an ",a.createElement(n.code,null,"id_token"),"."),"\n",a.createElement(n.h4,{id:"useoidcclient",style:{position:"relative"}},"useOidcClient",a.createElement(n.a,{href:"#useoidcclient","aria-label":"useoidcclient permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Returns the ",a.createElement(o.A,{anchor:"oidc-client"},"Oidc client module"),"."),"\n",a.createElement(n.h4,{id:"useoidcclienttracking",style:{position:"relative"}},"useOidcClientTracking",a.createElement(n.a,{href:"#useoidcclienttracking","aria-label":"useoidcclienttracking permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Returns an array of ",a.createElement(n.code,null,"[signal, reset function, oidcClient instance]"),". The hook re-renders the component each time the client emits a signal."),"\n",a.createElement(r.Ay,null,a.createElement(n.pre,null,a.createElement(n.code,{className:"language-jsx"},"import { useOidcClient, useOidcClientTracking, useAuthenticatedUser, useCachedAmr } from 'hds-react';\n\nconst OidcClientHooks = () => {\n  const client = useOidcClient();\n  const [lastSignal, reset, oidcClient] = useOidcClientTracking();\n  const user = useAuthenticatedUser();\n  const amr = useCachedAmr();\n  if (user) {\n    return <p>Your amr is: {amr ? amr[0] : 'none'}</p>;\n  } else {\n    return (\n      <Button\n        onClick={() => {\n          client.login();\n        }}\n      >\n        Log in!\n      </Button>\n    );\n  }\n};\n"))),"\n",a.createElement(n.h3,{id:"api-tokens-client-hooks",style:{position:"relative"}},"Api tokens client hooks",a.createElement(n.a,{href:"#api-tokens-client-hooks","aria-label":"api tokens client hooks permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"More detailed information about ",a.createElement(o.A,null,"Api tokens client")," hooks is listed on the ",a.createElement(d,{anchor:"api-tokens-client-hooks"},"API page"),"."),"\n",a.createElement(n.h4,{id:"useapitokens",style:{position:"relative"}},"useApiTokens",a.createElement(n.a,{href:"#useapitokens","aria-label":"useapitokens permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Returns functions for checking tokens and the status of renewal."),"\n",a.createElement(n.h4,{id:"useapitokensclient",style:{position:"relative"}},"useApiTokensClient",a.createElement(n.a,{href:"#useapitokensclient","aria-label":"useapitokensclient permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Returns the ",a.createElement(o.A,null,"Api tokens client")," module."),"\n",a.createElement(n.h4,{id:"useapitokensclienttracking",style:{position:"relative"}},"useApiTokensClientTracking",a.createElement(n.a,{href:"#useapitokensclienttracking","aria-label":"useapitokensclienttracking permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Returns an array of ",a.createElement(n.code,null,"[signal, reset function, apiTokensClient instance]"),". The hook re-renders the component each time the client emits a signal."),"\n",a.createElement(r.Ay,null,a.createElement(n.pre,null,a.createElement(n.code,{className:"language-jsx"},"import { useApiTokensClient, useApiTokens, useApiTokensClientTracking } from 'hds-react';\n\nconst ApiTokensClientHooks = () => {\n  const client = useApiTokensClient();\n  const { getStoredApiTokens, isRenewing } = useApiTokens();\n  const [lastSignal, reset, apiTokensClient] = useApiTokensClientTracking();\n  if (isRenewing()) {\n    return <p>Your API tokens are being renewed!</p>;\n  }\n  if (getStoredApiTokens()) {\n    return <p>You have API tokens!</p>;\n  }\n};\n"))),"\n",a.createElement(n.h3,{id:"session-poller-hooks",style:{position:"relative"}},"Session poller hooks",a.createElement(n.a,{href:"#session-poller-hooks","aria-label":"session poller hooks permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"More detailed information about ",a.createElement(o.A,null,"Session poller")," hooks is listed on the ",a.createElement(d,{anchor:"session-poller"},"API page"),"."),"\n",a.createElement(n.h4,{id:"usesessionpoller",style:{position:"relative"}},"useSessionPoller",a.createElement(n.a,{href:"#usesessionpoller","aria-label":"usesessionpoller permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Returns the ",a.createElement(o.A,null,"Session poller")," module."),"\n",a.createElement(n.h4,{id:"usesessionpollertracking",style:{position:"relative"}},"useSessionPollerTracking",a.createElement(n.a,{href:"#usesessionpollertracking","aria-label":"usesessionpollertracking permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Returns an array of ",a.createElement(n.code,null,"[signal, reset function, sessionPoller instance]"),". The hook re-renders the component each time the poller emits a signal."),"\n",a.createElement(r.Ay,null,a.createElement(n.pre,null,a.createElement(n.code,{className:"language-jsx"},"import { useSessionPoller, useSessionPollerTracking } from 'hds-react';\n\nconst SessionPollerHooks = () => {\n  const poller = useSessionPoller();\n  const [lastSignal, reset, sessionPoller] = useSessionPollerTracking();\n  if (isSessionPollerStoppedSignal(lastSignal)) {\n    <Button\n      onClick={() => {\n        poller.start();\n      }}\n    >\n      Start polling!\n    </Button>;\n  }\n};\n"))),"\n",a.createElement(n.h3,{id:"graphql-module-hooks",style:{position:"relative"}},"GraphQL module hooks",a.createElement(n.a,{href:"#graphql-module-hooks","aria-label":"graphql module hooks permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"More detailed information about ",a.createElement(o.A,null,"GraphQL module")," hooks are listed on the ",a.createElement(d,{anchor:"graphql-module"},"API page"),"."),"\n",a.createElement(n.h4,{id:"usegraphqlmodule",style:{position:"relative"}},"useGraphQLModule",a.createElement(n.a,{href:"#usegraphqlmodule","aria-label":"usegraphqlmodule permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Returns the ",a.createElement(o.A,null,"GraphQL module"),"."),"\n",a.createElement(n.h4,{id:"usegraphqlmoduletracking",style:{position:"relative"}},"useGraphQLModuleTracking",a.createElement(n.a,{href:"#usegraphqlmoduletracking","aria-label":"usegraphqlmoduletracking permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Returns an array of ",a.createElement(n.code,null,"[signal, reset function, GraphQL module instance]"),". The hook re-renders the component each time the module emits a signal."),"\n",a.createElement(n.h4,{id:"usegraphql",style:{position:"relative"}},"useGraphQL",a.createElement(n.a,{href:"#usegraphql","aria-label":"usegraphql permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"This function mimics the ",a.createElement(s.A,{href:"https://www.apollographql.com/docs/react/data/queries#manual-execution-with-uselazyquery"},"useLazyQuery")," hook of the Apollo GraphQL library.\nIt returns an array of ",a.createElement(n.code,null,"[query, {data, error, loading, refetch}]"),". The component using this hook is re-rendered each time the module changes and emits a signal. The returned array updates accordingly."),"\n",a.createElement(r.Ay,null,a.createElement(n.pre,null,a.createElement(n.code,{className:"language-jsx"},'import { useGraphQL, Button, LoadingSpinner, Notification } from \'hds-react\';\n\nconst GraphQLModuleHooks = () => {\n  const [query, { data, error, loading, refetch }] = useGraphQL();\n  if (loading) {\n    return <LoadingSpinner loadingText="loading" />;\n  }\n  if (error) {\n    return (\n      <div>\n        <Notification type="error">An error occured.</Notification>\n        <Button\n          onClick={() => {\n            refetch();\n          }}\n        >\n          Try again.\n        </Button>;\n      </div>\n    );\n  }\n  if (data) {\n    // ...render data\n  }\n\n  <Button\n    onClick={() => {\n      query();\n    }}\n  >\n    Load data\n  </Button>;\n};\n'))),"\n",a.createElement(n.h3,{id:"generic-signal-hooks",style:{position:"relative"}},"Generic signal hooks",a.createElement(n.a,{href:"#generic-signal-hooks","aria-label":"generic signal hooks permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Hooks are the easiest way to listen to signals. Most hooks return the last triggered signal and re-render the component. Re-rendering is done only if the listener returns true. So listeners added by hooks must return a boolean."),"\n",a.createElement(n.p,null,"Hooks dispose of the listeners when the component unmounts. Hooks cannot emit signals."),"\n",a.createElement(n.p,null,"Detailed information about these hooks is listed on the ",a.createElement(d,{anchor:"generic-signal-hooks"},"API page"),"."),"\n",a.createElement(n.h4,{id:"usesignallistener",style:{position:"relative"}},"useSignalListener",a.createElement(n.a,{href:"#usesignallistener","aria-label":"usesignallistener permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Adds a single listener for all signals. The hook re-renders the component each time a signal is emitted if the listener function returns true."),"\n",a.createElement(n.h4,{id:"usesignaltrackingwithcallback",style:{position:"relative"}},"useSignalTrackingWithCallback",a.createElement(n.a,{href:"#usesignaltrackingwithcallback","aria-label":"usesignaltrackingwithcallback permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Creates a trigger from given props and calls the callback function if any emitted signals match the trigger."),"\n",a.createElement(n.h4,{id:"usesignaltrackingwithreturnvalue",style:{position:"relative"}},"useSignalTrackingWithReturnValue",a.createElement(n.a,{href:"#usesignaltrackingwithreturnvalue","aria-label":"usesignaltrackingwithreturnvalue permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Creates a trigger from given props and re-renders the component if any emitted signals match the trigger."),"\n",a.createElement(n.p,null,a.createElement(n.strong,null,"Important!")," The listener passed to ",a.createElement(o.A,null,"useSignalListener")," must be memoized or the hook will attach a new listener on each render because the props changed. The old one is disposed of but to avoid unnecessary listeners, use memoization with ",a.createElement(n.code,null,"useMemo")," or ",a.createElement(n.code,null,"useCallback"),". Note that all ",a.createElement(n.code,null,"triggerFor...")," functions are constants and do not need memoization."),"\n",a.createElement(n.p,null,a.createElement(o.A,null,"useSignalTrackingWithReturnValue")," and ",a.createElement(o.A,null,"useSignalListener")," store their arguments\nin React refs, so memoization is not needed."),"\n",a.createElement(n.p,null,"The array returned by the ",a.createElement(o.A,null,"useSignalListener")," and the ",a.createElement(o.A,null,"useSignalTrackingWithReturnValue")," have the last signal, if any, and a reset function that clears the last signal. This can be used for tracking certain errors and then resetting the array when the user has seen a notification about the error."),"\n",a.createElement(r.Ay,null,a.createElement(n.pre,null,a.createElement(n.code,{className:"language-jsx"},"import {\n  useSignalListener,\n  useSignalTrackingWithReturnValue,\n  triggerForAllSessionPollerErrors,\n  isSessionEndedSignal,\n} from 'hds-react';\n\nconst ListenerComponent = () => {\n  const [ showDialog, setShowDialog ] = useState(false);\n    // Listener function must be memoized when useSignalListener is used!\n  const myListener = useCallback(( signal )=>{\n    if( isSessionEndedSignal(signal) ){\n      setShowDialog(true)\n    }\n  },[]);\n  useSignalListener(myListener);\n  if ( showDialog ) {\n    return <Dialog ... />\n  }\n};\n\nconst ListenerComponentWithReturnValue = () => {\n  const [showDialog, setShowDialog] = useState(false);\n  const [sessionEndedSignal] = useSignalTrackingWithReturnValue(triggerForAllSessionPollerErrors);\n  if(isSessionEndedSignal(sessionEndedSignal)){\n    setShowDialog(true)\n  }\n  if (showDialog) {\n    return <Dialog ... />\n  }\n};\n"))),"\n",a.createElement(n.p,null,"The properties and methods of all hooks are listed on the ",a.createElement(d,{anchor:"generic-signal-hooks"},"API page"),"."),"\n",a.createElement(n.h3,{id:"modules",style:{position:"relative"}},"Modules",a.createElement(n.a,{href:"#modules","aria-label":"modules permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Modules are automatically created by the ",a.createElement(o.A,null,"LoginProvider"),". Module settings are included in the ",a.createElement(d,{anchor:"loginprovider"},"LoginProvider settings")," and passed to each module."),"\n",a.createElement(n.p,null,"Properties, methods, errors and signals of all modules are listed on the ",a.createElement(d,{anchor:"modules"},"API page"),"."),"\n",a.createElement(n.h4,{id:"oidc-client",style:{position:"relative"}},"Oidc client",a.createElement(n.a,{href:"#oidc-client","aria-label":"oidc client permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"The ",a.createElement(d,{anchor:"oidc-client"},"Oidc client settings")," are defined in the ",a.createElement(d,{anchor:"loginprovider"},"userManagerSettings")," property, which is passed to the ",a.createElement(o.A,null,"LoginProvider"),"."),"\n",a.createElement(n.p,null,"The module is exposed with the ",a.createElement(o.A,null,"useOidcClient")," hook."),"\n",a.createElement(r.Ay,null,a.createElement(n.pre,null,a.createElement(n.code,{className:"language-jsx"},"import { useOidcClient } from 'hds-react';\n\nconst LogoutComponent = () => {\n  const { logout } = useOidcClient();\n  return <Button onClick={() => logout()}>Log out</Button>;\n};\n"))),"\n",a.createElement(n.h5,{id:"requirements",style:{position:"relative"}},"Requirements",a.createElement(n.a,{href:"#requirements","aria-label":"requirements permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Usage of the ",a.createElement(o.A,null,"Oidc client")," requires"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"An OIDC provider."),"\n",a.createElement(n.li,null,"At least ",a.createElement(n.code,null,"client id"),", ",a.createElement(n.code,null,"authority"),", ",a.createElement(n.code,null,"scope")," and registered callback URLs at the OIDC provider."),"\n",a.createElement(n.li,null,"Specific ",a.createElement(n.code,null,"silent_renew.html")," for silent token renewal. This is a poorly documented feature in the ",a.createElement(n.code,null,"oidc-client-ts"),'. This file has a javascript snippet that communicates with the oidc provider "silently" in a hidden iframe. More about ',a.createElement(s.A,{href:"https://www.oauth.com/oauth2-servers/access-tokens/refreshing-access-tokens/"},"token renewal"),". An example can be found in the ",a.createElement(o.A,{anchor:"silent-renewal"},"silent renewal section"),"."),"\n"),"\n",a.createElement(n.h5,{id:"api",style:{position:"relative"}},"API",a.createElement(n.a,{href:"#api","aria-label":"api permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"All ",a.createElement(o.A,null,"Oidc client")," settings, properties, methods and signals are detailed on the API page:"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"settings"},"Module settings"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"default-usermanager-settings"},"Default UserManager settings"),"."),"\n",a.createElement(n.li,null,a.createElement(d,null,"Methods"),"."),"\n",a.createElement(n.li,null,a.createElement(d,null,"State change signals"),"."),"\n",a.createElement(n.li,null,a.createElement(d,null,"Event signals"),"."),"\n",a.createElement(n.li,null,a.createElement(d,null,"Error signal types"),"."),"\n",a.createElement(n.li,null,a.createElement(d,null,"Dedicated signal triggers"),"."),"\n",a.createElement(n.li,null,a.createElement(d,null,"Getting signal payloads"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"other-exported-utility-functions"},"Utility functions"),"."),"\n"),"\n",a.createElement(n.h5,{id:"hooks",style:{position:"relative"}},"Hooks",a.createElement(n.a,{href:"#hooks","aria-label":"hooks permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useOidcClient"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useAuthenticatedUser"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useCachedAmr"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useOidcClientTracking"),"\n"),"\n"),"\n",a.createElement(n.p,null,"Detailed information about these hooks is listed on the ",a.createElement(d,{anchor:"oidc-client-hooks"},"API page"),"."),"\n",a.createElement(n.h4,{id:"api-tokens-client",style:{position:"relative"}},"Api tokens client",a.createElement(n.a,{href:"#api-tokens-client","aria-label":"api tokens client permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"The ",a.createElement(n.code,null,"Api tokens client")," listens to the ",a.createElement(d,{anchor:"state-change-signals"},"Oidc client signals")," and waits until the user is authenticated and then fetches the API tokens. It retries if fetch fails and terminates when max retries are reached. When the user is expiring and renews, API tokens are also renewed automatically."),"\n",a.createElement(n.p,null,a.createElement(n.strong,null,"Important!")," The Helsinki Profile OIDC provider uses a different kind of API token requests. This module does not support that, but a new module will be added later."),"\n",a.createElement(n.h5,{id:"requirements-1",style:{position:"relative"}},"Requirements",a.createElement(n.a,{href:"#requirements-1","aria-label":"requirements 1 permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"URL where to get the tokens from. A user's access token is also required, so the user must be authenticated to fetch API tokens."),"\n",a.createElement(n.h5,{id:"api-1",style:{position:"relative"}},"API",a.createElement(n.a,{href:"#api-1","aria-label":"api 1 permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"All ",a.createElement(n.code,null,"Api tokens client")," settings, properties, methods and signals are detailed on the API page:"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"settings-1"},"Module settings"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"methods-1"},"Methods"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"other-exported-utility-functions-1"},"Utility functions"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"event-signals-1"},"Event signals"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"error-signal-types-1"},"Error signal types"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"dedicated-signal-triggers-1"},"Dedicated signal triggers"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"getting-signal-payloads-1"},"Getting signal payloads"),"."),"\n"),"\n",a.createElement(n.h5,{id:"hooks-1",style:{position:"relative"}},"Hooks",a.createElement(n.a,{href:"#hooks-1","aria-label":"hooks 1 permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useApiTokensClient"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useApiTokens"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useApiTokensClientTracking"),"\n"),"\n"),"\n",a.createElement(n.p,null,"Detailed information about these hooks is listed on the ",a.createElement(d,{anchor:"api-tokens-client-hooks"},"API page"),"."),"\n",a.createElement(n.h4,{id:"session-poller",style:{position:"relative"}},"Session poller",a.createElement(n.a,{href:"#session-poller","aria-label":"session poller permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"The user's session could end outside of the current browser window. The ",a.createElement(n.code,null,"Session poller")," calls the userinfo endpoint and notifies when it receives an unauthorized or forbidden response. Successes and other errors are ignored."),"\n",a.createElement(n.h5,{id:"requirements-2",style:{position:"relative"}},"Requirements",a.createElement(n.a,{href:"#requirements-2","aria-label":"requirements 2 permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Polling requires a user and the ",a.createElement(d,{anchor:"object-types-from-oidc-client-ts"},"userManager")," from the ",a.createElement(o.A,null,"Oidc client"),". The polling endpoint is fetched from ",a.createElement(d,{anchor:"object-types-from-oidc-client-ts"},"userManager's")," metadata."),"\n",a.createElement(n.h5,{id:"api-2",style:{position:"relative"}},"API",a.createElement(n.a,{href:"#api-2","aria-label":"api 2 permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"All ",a.createElement(n.code,null,"Session poller")," settings, properties, methods and signals are detailed on the API page:"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"settings-2"},"Module settings"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"methods-2"},"Methods"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"other-exported-utility-functions-2"},"Utility functions"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"event-signals-2"},"Event signals"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"error-signal-types-2"},"Error signal types"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"dedicated-signal-triggers-2"},"Dedicated signal triggers"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"getting-signal-payloads-2"},"Getting signal payloads"),"."),"\n"),"\n",a.createElement(n.h5,{id:"hooks-2",style:{position:"relative"}},"Hooks",a.createElement(n.a,{href:"#hooks-2","aria-label":"hooks 2 permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useSessionPoller"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useSessionPollerTracking"),"\n"),"\n"),"\n",a.createElement(n.p,null,"Detailed information about these hooks is listed on the ",a.createElement(d,{anchor:"session-poller-hooks"},"API page"),"."),"\n",a.createElement(n.h4,{id:"graphql-module",style:{position:"relative"}},"GraphQL module",a.createElement(n.a,{href:"#graphql-module","aria-label":"graphql module permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Loading data from a graphQL server may require user authentication and api tokens. The GraphQL module can be set to listen to the Api token client and start querying when api tokens are ready. It can pick the correct api token and set it to the query headers."),"\n",a.createElement(n.p,null,"The module can also be used without api tokens and can be controlled manually."),"\n",a.createElement(n.h5,{id:"requirements-3",style:{position:"relative"}},"Requirements",a.createElement(n.a,{href:"#requirements-3","aria-label":"requirements 3 permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"To execute a query, the following requirements must be met:"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"A graphQLClient (ApolloClient) must be configured and passed to the ",a.createElement(n.code,null,"GraphQL module"),"."),"\n",a.createElement(n.li,null,"A query document must be provided."),"\n"),"\n",a.createElement(n.p,null,"Detailed information about authenticated queries is on the ",a.createElement(d,{anchor:"requirements-2"},"API page"),"."),"\n",a.createElement(n.h5,{id:"api-3",style:{position:"relative"}},"API",a.createElement(n.a,{href:"#api-3","aria-label":"api 3 permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"All ",a.createElement(n.code,null,"GraphQL module")," settings, properties, methods and signals are detailed on the API page:"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"settings-3"},"Module settings"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"methods-3"},"Methods"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"other-exported-utility-functions-3"},"Utility functions"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"event-signals-3"},"Event signals"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"error-signal-types-3"},"Error signal types"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"dedicated-signal-triggers-3"},"Dedicated signal triggers"),"."),"\n",a.createElement(n.li,null,a.createElement(d,{anchor:"getting-signal-payloads-3"},"Getting signal payloads"),"."),"\n"),"\n",a.createElement(n.h5,{id:"hooks-3",style:{position:"relative"}},"Hooks",a.createElement(n.a,{href:"#hooks-3","aria-label":"hooks 3 permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useGraphQLModule"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useGraphQLModuleTracking"),"\n"),"\n",a.createElement(n.li,null,"\n",a.createElement(o.A,null,"useGraphQL"),"\n"),"\n"),"\n",a.createElement(n.p,null,"Detailed information about these hooks is listed on the ",a.createElement(d,{anchor:"graphql-module-hooks"},"API page"),"."),"\n",a.createElement(n.h4,{id:"silent-renewal",style:{position:"relative"}},"Silent renewal",a.createElement(n.a,{href:"#silent-renewal","aria-label":"silent renewal permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"The ",a.createElement(s.A,{href:"https://github.com/authts/oidc-client-ts"},"oidc-client-ts")," uses ",a.createElement(n.code,null,"silent_renew.html")," for user token renewal. Save this file to your server and place the URL in the settings as ",a.createElement(n.code,null,"silent_redirect_uri"),"."),"\n",a.createElement(r.Ay,null,a.createElement(n.pre,null,a.createElement(n.code,{className:"language-js"},'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <title>Silent renewal</title>\n  </head>\n  <body>\n    <script\n      src="https://cdnjs.cloudflare.com/ajax/libs/oidc-client-ts/2.2.2/browser/oidc-client-ts.min.js"\n      integrity="sha512-pt8b5O4w5Y9/xZpIhPN8Soo/YbC95SxHn0P/Mu39iYB2Ih/09TMS3Id5XPqve2f8DPC6voXOzgQNojCuqO6A4w=="\n      crossorigin="anonymous"\n      referrerpolicy="no-referrer"\n    ><\/script>\n    <script>\n      var mgr = new oidc.UserManager({});\n      mgr.signinSilentCallback().catch(error => {\n        console.error(\'silent_renew.html error\', error);\n      });\n    <\/script>\n  </body>\n</html>\n'))),"\n",a.createElement(n.h3,{id:"signals",style:{position:"relative"}},"Signals",a.createElement(n.a,{href:"#signals","aria-label":"signals permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Signals can be listened to with hooks. Each module has its own hook for listening to signals only from that module. There are also hooks for listening to all signals and filtering is possible with triggers."),"\n",a.createElement(n.p,null,"Detailed information is in the ",a.createElement(d,{anchor:"signals"},"API section"),"."),"\n",a.createElement(n.h4,{id:"listening-to-signals",style:{position:"relative"}},"Listening to signals",a.createElement(n.a,{href:"#listening-to-signals","aria-label":"listening to signals permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"A signal listener is a function that receives one argument: the signal. A listener can listen to all signals or just one type or signal with a certain namespace. Listeners can be even more specific and listen to signals with certain payloads. In short, a listener can listen to any properties of the signal and is triggered when all properties match."),"\n",a.createElement(n.p,null,"The listener is called only if the emitted signal matches the given props."),"\n",a.createElement(n.p,null,"For example, if the trigger props (the first argument) passed to ",a.createElement(n.code,null,"beacon.addListener(trigger, listener)")," is ",a.createElement(n.code,null,"{ type:'error' }"),", the listener (second argument) is called when the emitted signal has a matching type. It does not matter what other props the signal has."),"\n",a.createElement(n.p,null,"If the trigger props are ",a.createElement(n.code,null,"{ namespace:'myModule', payload:{type:'click'} }"),", the emitted signal must have those properties with the same, exact values. Other properties are not checked."),"\n",a.createElement(n.p,null,"The trigger can also be a function. Internally all triggers are converted to functions."),"\n",a.createElement(r.Ay,null,a.createElement(n.pre,null,a.createElement(n.code,{className:"language-jsx"},"const listener = (signal) => {\n  // Do something with the signal.\n};\n// Listen to all error signals\nconst trigger = { type: 'error' };\nuseSignalTrackingWithCallback(trigger, listener);\n"))),"\n",a.createElement(n.h4,{id:"getting-signal-payloads",style:{position:"relative"}},"Getting signal payloads",a.createElement(n.a,{href:"#getting-signal-payloads","aria-label":"getting signal payloads permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"Sometimes the most significant part of a signal is the payload. There are predefined payload getters for the ",a.createElement(o.A,null,"Oidc client"),". If the given signal is not from the ",a.createElement(n.code,null,"Oidc client")," or is not of the given type, the function returns null. So there is no need to pre-check the signal namespace or type."),"\n",a.createElement(r.Ay,null,a.createElement(n.pre,null,a.createElement(n.code,{className:"language-jsx"},"import {\n  useSignalTrackingWithReturnValue,\n  triggerForAllOidcClientSignals,\n  getOidcClientStateChangePayload,\n  oidcClientStates,\n} from 'hds-react';\n\nconst StateChangeIndicator = () => {\n  const [lastSignal, reset] = useSignalTrackingWithReturnValue(triggerForAllOidcClientSignals);\n  const payload = lastSignal ? getOidcClientStateChangePayload(lastSignal) : null;\n  if (payload && payload.state === oidcClientStates.LOGGING_OUT) {\n    return <p>Logging out....</p>;\n  }\n};\n"))),"\n",a.createElement(n.h3,{id:"using-without-react",style:{position:"relative"}},"Using without React",a.createElement(n.a,{href:"#using-without-react","aria-label":"using without react permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.p,null,"When React is not used, the ",a.createElement(d,null,"beacon")," and ",a.createElement(d,null,"modules")," can be created and initialized with ",a.createElement(n.code,null,"createLoginSystem(props)"),". Props are the same as those passed to ",a.createElement(o.A,null,"LoginProvider"),". The function returns a ",a.createElement(d,null,"beacon")," instance that holds all modules. There are dozens of utility functions to use without React. See ",a.createElement(d,null,"modules")," and ",a.createElement(d,null,"signals"),"."),"\n",a.createElement(r.Ay,null,a.createElement(n.pre,null,a.createElement(n.code,{className:"language-js"},"import { createLoginSystem } from 'hds-react';\n\n// Actual properties are omitted from this example to keep it simple\nconst loginSystemProperties = {...}\n\nconst beacon = createLoginSystem(loginSystemProperties);\n\n"))),"\n",a.createElement(n.h3,{id:"packages",style:{position:"relative"}},"Packages",a.createElement(n.a,{href:"#packages","aria-label":"packages permalink",className:"header-anchor after"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span class="hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs" aria-hidden="true" style="vertical-align: middle"></span>'}}))),"\n",a.createElement(n.table,null,a.createElement(n.thead,null,a.createElement(n.tr,null,a.createElement(n.th,null,"Package"),a.createElement(n.th,null,"Included"),a.createElement(n.th,null,"Storybook link"),a.createElement(n.th,null,"Source link"))),a.createElement(n.tbody,null,a.createElement(n.tr,null,a.createElement(n.td,null,a.createElement(n.strong,null,"HDS React")),a.createElement(n.td,null,a.createElement("div",{style:{display:"flex",gap:"var(--spacing-3-xs)"}},a.createElement(t)," Yes ")),a.createElement(n.td,null,a.createElement(i,{size:"M",openInNewTab:!0,openInNewTabAriaLabel:"Opens in a new tab",href:"/storybook/react/?path=/story/components-login--example-application"},"View in Storybook")),a.createElement(n.td,null,a.createElement(s.A,{size:"M",openInExternalDomainAriaLabel:"Opens in a new domain",openInNewTab:!0,openInNewTabAriaLabel:"Opens in a new tab",href:"https://github.com/City-of-Helsinki/helsinki-design-system/blob/master/packages/react/src/components/login"},"View source"))),a.createElement(n.tr,null,a.createElement(n.td,null,a.createElement(n.strong,null,"HDS Core")),a.createElement(n.td,null,a.createElement("div",{style:{display:"flex",gap:"var(--spacing-3-xs)"}},a.createElement(c)," No ")),a.createElement(n.td,null,"-"),a.createElement(n.td,null,"-")))))}var u=function(e){return void 0===e&&(e={}),a.createElement(c,e,a.createElement(h,e))};function m(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}function p(e){let{children:n}=e;return a.createElement(a.Fragment,null,n)}function g(e){return a.createElement(p,e,a.createElement(u,e))}},72906:function(e,n,t){t.d(n,{I:function(){return r}});var l=t(96540),a=t(16065);const r=({ariaLabel:e="question-circle",ariaLabelledby:n,ariaHidden:t=!0,className:r="",color:i,size:s="s",style:o={}})=>l.createElement("svg",{className:[a.s.icon,a.s[s],r].filter((e=>e)).join(" "),role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-label":e,"aria-labelledby":n,"aria-hidden":t,color:i,style:o},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2ZM12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM13 16V18H11V16H13ZM12.0437 5.75C14.0343 5.75 15.7173 7.29464 15.7173 9.42361C15.7173 10.7806 15.2461 11.489 14.161 12.306L13.9187 12.4844C13.1753 13.0295 12.9556 13.3359 12.9386 14.142L12.9375 14.25H10.9375C10.9375 12.6746 11.4591 11.8378 12.6143 10.9622L12.8618 10.7796C13.5685 10.2628 13.7173 10.0539 13.7173 9.42361C13.7173 8.43934 12.9662 7.75 12.0437 7.75C11.1907 7.75 10.4785 8.34077 10.3816 9.20835L10.3734 9.30587L8.37663 9.19182C8.49191 7.17347 10.1344 5.75 12.0437 5.75Z",fill:"currentColor"}))},87469:function(e,n,t){t.d(n,{S:function(){return c}});var l=t(68795),a=t(96540),r=(t(6453),t(35963)),i=t(51806),s={statusLabel:"StatusLabel-module_statusLabel__3R2J2 status-label_hds-status-label__1L8YI",statusLabelWithIcon:"StatusLabel-module_statusLabelWithIcon__5lKVk status-label_hds-status-label--with-icon__3bHf6",statusLabelIcon:"StatusLabel-module_statusLabelIcon__2SAou status-label_hds-status-label-icon__3K58a",info:"StatusLabel-module_info__3YrAe status-label_hds-status-label--info__J28-H",success:"StatusLabel-module_success__2BfdX status-label_hds-status-label--success__3jiST",alert:"StatusLabel-module_alert__2VR8r status-label_hds-status-label--alert__1ecsX",error:"StatusLabel-module_error__zNgn8 status-label_hds-status-label--error__2EYi4"};(0,r.s)(".status-label_hds-status-label__1L8YI{--status-label-background:var(--color-black-10);--status-label-color:var(--color-black-90);--status-label-height:32px;background-color:var(--status-label-background);border-radius:20px;color:var(--status-label-color);display:inline-block;font-size:var(--fontsize-body-s);line-height:var(--status-label-height);min-height:var(--status-label-height);padding:0 var(--spacing-2-xs);vertical-align:middle}.status-label_hds-status-label--with-icon__3bHf6{align-items:center;display:inline-flex;padding-left:var(--spacing-3-xs)}.status-label_hds-status-label-icon__3K58a{height:var(--spacing-m);margin-right:var(--spacing-3-xs);width:var(--spacing-m)}.status-label_hds-status-label--info__J28-H{--status-label-background:var(--color-info);--status-label-color:var(--color-white)}.status-label_hds-status-label--success__3jiST{--status-label-background:var(--color-success);--status-label-color:var(--color-white)}.status-label_hds-status-label--alert__1ecsX{--status-label-background:var(--color-alert)}.status-label_hds-status-label--error__2EYi4{--status-label-background:var(--color-error);--status-label-color:var(--color-white)}");const o=({icon:e})=>a.createElement("span",{className:s.statusLabelIcon,"aria-hidden":"true"},e),c=e=>{var{children:n,className:t,dataTestId:r,type:c="neutral",iconLeft:d}=e,h=(0,l._)(e,["children","className","dataTestId","type","iconLeft"]);return a.createElement("span",Object.assign({className:(0,i.c)(s.statusLabel,s[c],d&&s.statusLabelWithIcon,t),"data-testid":r},h),d&&a.createElement(o,{icon:d}),n)}},67464:function(e,n,t){t.d(n,{T:function(){return c}});var l=t(68795),a=t(96540),r=t(95859),i=(t(6453),t(35963)),s=t(72906),o=t(51806);(0,i.s)(".Tooltip-module_button__2x9m0{background:none;border:none;color:inherit;cursor:pointer;font:inherit;padding:0}.Tooltip-module_root__1Yo9t{--button-focus-outline-width:3px;--button-focus-outline-color:var(--color-coat-of-arms);--tooltip-arrow-size:8px;--tooltip-background:var(--color-coat-of-arms-light);--tooltip-border-color:var(--color-coat-of-arms);--tooltip-spacing-default:var(--spacing-s);--tooltip-spacing-small:var(--spacing-3-xs) var(--spacing-2-xs)}.Tooltip-module_tooltip__3x8S8{background-color:var(--tooltip-background);font-size:var(--fontsize-body-s);font-weight:400;line-height:24px;max-width:21.875rem;padding:var(--tooltip-spacing-default);z-index:1000}.Tooltip-module_boxShadow__3IzE-{box-shadow:var(--box-shadow-s)}.Tooltip-module_small__29mxd{padding:var(--tooltip-spacing-small)}.Tooltip-module_button__2x9m0>span{display:flex}.Tooltip-module_button__2x9m0:focus{box-shadow:0 0 0 var(--button-focus-outline-width) var(--button-focus-outline-color);outline:none}.Tooltip-module_tooltip__3x8S8[data-popper-placement^=bottom]{border-top:8px solid var(--tooltip-border-color)}.Tooltip-module_tooltip__3x8S8[data-popper-placement^=top]{border-bottom:8px solid var(--tooltip-border-color)}.Tooltip-module_tooltip__3x8S8[data-popper-placement^=left]{border-right:8px solid var(--tooltip-border-color)}.Tooltip-module_tooltip__3x8S8[data-popper-placement^=right]{border-left:8px solid var(--tooltip-border-color)}.Tooltip-module_tooltip__3x8S8 .Tooltip-module_arrow__210Rd{position:absolute}.Tooltip-module_tooltip__3x8S8[data-popper-placement^=bottom] .Tooltip-module_arrow__210Rd{border:var(--tooltip-arrow-size) solid transparent;border-bottom:var(--tooltip-arrow-size) solid var(--tooltip-border-color);top:calc(-1 * var(--tooltip-spacing-default) - var(--tooltip-arrow-size))}.Tooltip-module_tooltip__3x8S8[data-popper-placement^=top] .Tooltip-module_arrow__210Rd{border:var(--tooltip-arrow-size) solid transparent;border-top:var(--tooltip-arrow-size) solid var(--tooltip-border-color);bottom:calc(-1 * var(--tooltip-spacing-default) - var(--tooltip-arrow-size))}.Tooltip-module_tooltip__3x8S8[data-popper-placement^=left] .Tooltip-module_arrow__210Rd{border:var(--tooltip-arrow-size) solid transparent;border-left:var(--tooltip-arrow-size) solid var(--tooltip-border-color);right:calc(-1 * var(--tooltip-spacing-default) - var(--tooltip-arrow-size))}.Tooltip-module_tooltip__3x8S8[data-popper-placement^=right] .Tooltip-module_arrow__210Rd{border:var(--tooltip-arrow-size) solid transparent;border-right:var(--tooltip-arrow-size) solid var(--tooltip-border-color);left:calc(-1 * var(--tooltip-spacing-default) - var(--tooltip-arrow-size))}");const c=e=>{var{boxShadow:n=!1,children:t,placement:i="auto",small:c=!1,buttonLabel:d="Tooltip",tooltipLabel:h="Tooltip",className:u,buttonClassName:m,tooltipClassName:p}=e,g=(0,l._)(e,["boxShadow","children","placement","small","buttonLabel","tooltipLabel","className","buttonClassName","tooltipClassName"]);const[E,k]=(0,a.useState)(!1),f=(0,a.useRef)(null),b=(0,a.useRef)(null),[y,v]=(0,a.useState)(null),{styles:_,attributes:A,forceUpdate:T}=(0,r.E)(f.current,b.current,{placement:i,modifiers:[{name:"arrow",options:{element:y}},{name:"offset",options:{offset:[0,10]}}]});return(0,a.useEffect)((()=>{null!==T&&!0===E&&T()}),[E,T]),(0,a.useEffect)((()=>{const e=e=>{const n=e.key||e.keyCode;!E||"Escape"!==n&&"Esc"!==n&&27!==n||k(!1)},n=e=>{const n=e.target;!E||f.current.contains(n)||b.current.contains(n)||k(!1)};return document.addEventListener("keyup",e),document.addEventListener("click",n),()=>{document.removeEventListener("keyup",e),document.removeEventListener("click",n)}})),a.createElement("div",Object.assign({},g,{className:(0,o.c)("Tooltip-module_root__1Yo9t",u)}),a.createElement("button",{ref:f,type:"button",className:(0,o.c)("Tooltip-module_button__2x9m0",m),title:d,"aria-label":d,"aria-expanded":E,onClick:()=>{k(!E)},onBlur:()=>k(!1)},a.createElement("span",{"aria-hidden":"true"},a.createElement(s.I,null))),E&&a.createElement("section",Object.assign({"aria-label":h,ref:b,className:(0,o.c)("Tooltip-module_tooltip__3x8S8",c&&"Tooltip-module_small__29mxd",n&&"Tooltip-module_boxShadow__3IzE-",p),style:_.popper},A.popper),t,a.createElement("div",Object.assign({ref:v,className:"Tooltip-module_arrow__210Rd",style:_.arrow},A.arrow))))}}}]);