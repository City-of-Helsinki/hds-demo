"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[3107],{99304:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return s},default:function(){return m}});var a=n(45987),r=(n(67294),n(64983)),o=n(44186),l=n(88562);const i=["components"],s={slug:"/components/login/customisation",title:"Login - Customisation"},d={_frontmatter:s},c=e=>{let{children:t,pageContext:n}=e;return(0,r.kt)(l.default,{pageContext:n},t)};function m(e){let{components:t}=e,n=(0,a.Z)(e,i);return(0,r.kt)(c,Object.assign({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"creating-and-connecting-your-own-module",style:{position:"relative"}},"Creating and connecting your own module",(0,r.kt)("a",{parentName:"h2",href:"#creating-and-connecting-your-own-module","aria-label":"creating and connecting your own module permalink",className:"header-anchor after"},(0,r.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,r.kt)("p",null,"If there is a need for a deeper connection to other modules, a custom module can be created. Modules can emit signals. Modules are not React-specific, just plain javascript.\nA module passed to the beacon must have the following properties:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"namespace")),(0,r.kt)("td",{parentName:"tr",align:null},"String. A unique namespace.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"connect(beacon)")),(0,r.kt)("td",{parentName:"tr",align:null},"Function called when module is added to the beacon")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[Table 1: custom module properties]"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)(o.ZP,{mdxType:"PlaygroundPreview"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import { createNamespacedBeacon, ConnectedModule } from 'hds-react';\n\nconst createMyCustomModule = (): ConnectedModule => {\n  const customBeacon = createNamespacedBeacon('myModule');\n  const listener = (signal) => {\n    // this is listenening everything\n  };\n  return {\n    namespace: helperNamespace,\n    connect: (targetBeacon) => {\n      customBeacon.storeBeacon(targetBeacon);\n      customBeacon.addListener(createTriggerForAllSignalTypes(), listener);\n    },\n  };\n};\n"))),(0,r.kt)("h3",{id:"connecting-your-module",style:{position:"relative"}},"Connecting your module",(0,r.kt)("a",{parentName:"h3",href:"#connecting-your-module","aria-label":"connecting your module permalink",className:"header-anchor after"},(0,r.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,r.kt)("p",null,"Modules are automatically connected to other modules when they are passed in the ",(0,r.kt)("inlineCode",{parentName:"p"},"modules")," property of the LoginProvider."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Module.connect()")," is called and when all modules are connected, an ",(0,r.kt)("inlineCode",{parentName:"p"},"init")," signal is emitted for each module. This is done by the beacon."),(0,r.kt)(o.ZP,{mdxType:"PlaygroundPreview"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import { createNamespacedBeacon, ConnectedModule } from 'hds-react';\n\nconst myModule = createMyCustomModule()\n\nconst providerProperties = {..., modules=[myModule]}\n\n<LoginProvider {...providerProperties}>\n  <Content />\n</LoginProvider>\n"))),(0,r.kt)("h3",{id:"custom-namespaced-beacons-for-modules",style:{position:"relative"}},"Custom namespaced beacons for modules",(0,r.kt)("a",{parentName:"h3",href:"#custom-namespaced-beacons-for-modules","aria-label":"custom namespaced beacons for modules permalink",className:"header-anchor after"},(0,r.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,r.kt)("p",null,"Modules must emit signals in their own namespace. Beacon has only one emit function. To make emitting easier, the ",(0,r.kt)("inlineCode",{parentName:"p"},"createNamespacedBeacon")," returns a utility, where all emitted signals have pre-set namespace and there are emit functions for different signal types."),(0,r.kt)("p",null,"This utility also handles cases, where listeners are added before the module is connected to the beacon."),(0,r.kt)("p",null,"It also ignores signals from its own namespace, when listening to generic signals."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Return values"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"storeBeacon(beacon)")),(0,r.kt)("td",{parentName:"tr",align:null},"Beacon. Call this from the ",(0,r.kt)("inlineCode",{parentName:"td"},"module.connect()"),". Stores the beacon, so the module does not have to store it."),(0,r.kt)("td",{parentName:"tr",align:null},"none")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"emit(signal)")),(0,r.kt)("td",{parentName:"tr",align:null},"calls beacon.emit, if the beacon is connected"),(0,r.kt)("td",{parentName:"tr",align:null},"none")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"addListener(signalProps, listener)")),(0,r.kt)("td",{parentName:"tr",align:null},"Adds a listener for given signal props. Module's own signals are filtered out if the namespace is for all signals."),(0,r.kt)("td",{parentName:"tr",align:null},"Disposer function")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"emitError(payload)")),(0,r.kt)("td",{parentName:"tr",align:null},"Emits an error with the given payload"),(0,r.kt)("td",{parentName:"tr",align:null},"Context module or undefined")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"emitEvent(payload, data)")),(0,r.kt)("td",{parentName:"tr",align:null},"Emits an event with the given type and data in the payload"),(0,r.kt)("td",{parentName:"tr",align:null},"Object")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"emitStateChange(state,previousState)")),(0,r.kt)("td",{parentName:"tr",align:null},"Emits a stateChange with the given state and previousState in the payload"),(0,r.kt)("td",{parentName:"tr",align:null},"none")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[Table 2: custom beacon utility functions]"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)(o.ZP,{mdxType:"PlaygroundPreview"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"import { createNamespacedBeacon, ConnectedModule } from 'hds-react';\n\nconst createMyCustomModule = (): ConnectedModule => {\n  let state = 'none';\n  const customBeacon = createNamespacedBeacon('myModule');\n  const listener = (signal) => {\n    if (isErrorSignal) {\n      newState = 'error';\n      customBeacon.emitStateChange(newState, state);\n      state = newState;\n    }\n  };\n  return {\n    namespace: helperNamespace,\n    connect: (targetBeacon) => {\n      customBeacon.storeBeacon(targetBeacon);\n      customBeacon.addListener(createTriggerForAllSignalTypes(), listener);\n    },\n  };\n};\n"))))}m.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-docs-components-login-customisation-mdx-c300e158036e4527a4a7.js.map