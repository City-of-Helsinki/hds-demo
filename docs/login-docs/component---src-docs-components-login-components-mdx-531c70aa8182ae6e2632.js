"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[9447],{81630:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return p},default:function(){return m}});var a=n(45987),r=(n(67294),n(64983)),i=n(44186),l=n(1076),o=n(80699),s=n(88562);const d=["components"],p={slug:"/components/login/components",title:"Login - Components"},h={_frontmatter:p},c=e=>{let{children:t,pageContext:n}=e;return(0,r.kt)(s.default,{pageContext:n},t)};function m(e){let{components:t}=e,n=(0,a.Z)(e,d);return(0,r.kt)(c,Object.assign({},h,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"components",style:{position:"relative"}},"Components",(0,r.kt)("a",{parentName:"h2",href:"#components","aria-label":"components permalink",className:"header-anchor after"},(0,r.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,r.kt)("h3",{id:"loginprovider",style:{position:"relative"}},"LoginProvider",(0,r.kt)("a",{parentName:"h3",href:"#loginprovider","aria-label":"loginprovider permalink",className:"header-anchor after"},(0,r.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,r.kt)("p",null,"This component creates a React context and initialises all modules. All components and hooks are required to render inside the LoginProvider or React Context will throw an error."),(0,r.kt)("h3",{id:"properties",style:{position:"relative"}},"Properties",(0,r.kt)("a",{parentName:"h3",href:"#properties","aria-label":"properties permalink",className:"header-anchor after"},(0,r.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"userManagerSettings")),(0,r.kt)("td",{parentName:"tr",align:null},"Required. ",(0,r.kt)(l.Z,{href:"/components/login/modules#default-settings",mdxType:"InternalLink"},"Settings for the Oidc client."))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"apiTokensClientSettings")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. ",(0,r.kt)(l.Z,{href:"/components/login/modules#settings-1",mdxType:"InternalLink"},"Settings for the Api tokens client."),"If omitted, the api tokens client is not created.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"sessionPollerSettings")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. ",(0,r.kt)(l.Z,{href:"/components/login/modules#settings-2",mdxType:"InternalLink"},"Settings for the Session poller."),"If omitted, the Session poller is not created. If default values are acceptable, an empty object is required to create the poller.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"debug")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. If true, debugging is enabled. See ",(0,r.kt)(l.Z,{href:"/components/login/modules#settings",mdxType:"InternalLink"},"Oidc client settings."))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"modules")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. An array of ",(0,r.kt)(l.Z,{href:"/components/login/customisation",mdxType:"InternalLink"},"custom modules"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[Table 1: Properties of the LoginProvider component]"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)(i.ZP,{mdxType:"PlaygroundPreview"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"const providerProperties: LoginProviderProps = {\n  userManagerSettings: {\n    authority: 'https://tunnistamo.dev.hel.ninja/',\n    client_id: 'exampleapp-ui-dev',\n    scope: 'openid profile email',\n    redirect_uri: 'https://service.fi/callback',\n  },\n  apiTokensClientSettings: { url: 'https://tunnistamo.dev.hel.ninja/api-tokens/' },\n  sessionPollerSettings: { pollIntervalInMs: 300000 },\n};\n\n<LoginProvider {...providerProperties}>\n  <p>Hello!</p>\n</LoginProvider>;\n"))),(0,r.kt)("h3",{id:"loginbutton",style:{position:"relative"}},"LoginButton",(0,r.kt)("a",{parentName:"h3",href:"#loginbutton","aria-label":"loginbutton permalink",className:"header-anchor after"},(0,r.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,r.kt)("p",null,"The login button handles the redirection to the OIDC server and also errors if the server rejects the request for ",(0,r.kt)(o.Z,{href:"https://tunnistamo.dev.hel.ninja/.well-known/openid-configuration",mdxType:"ExternalLink"},"openID configuration"),"."),(0,r.kt)("h3",{id:"properties-1",style:{position:"relative"}},"Properties",(0,r.kt)("a",{parentName:"h3",href:"#properties-1","aria-label":"properties 1 permalink",className:"header-anchor after"},(0,r.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Default"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"errorText")),(0,r.kt)("td",{parentName:"tr",align:null},"Required. Error text shown, if OIDC server rejects the connection"),(0,r.kt)("td",{parentName:"tr",align:null},"none")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"spinnerColor")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. Colour of the loading spinner."),(0,r.kt)("td",{parentName:"tr",align:null},"var(--color-white)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[Table 2: Properties of the LoginButton component]"),(0,r.kt)("td",{parentName:"tr",align:null}),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)("p",null,"Button text passed and rendered as a child."),(0,r.kt)(i.ZP,{mdxType:"PlaygroundPreview"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'<LoginButton errorText="Login failed. Try again!">Log in</LoginButton>\n'))),(0,r.kt)("h3",{id:"logincallbackhandler",style:{position:"relative"}},"LoginCallbackHandler",(0,r.kt)("a",{parentName:"h3",href:"#logincallbackhandler","aria-label":"logincallbackhandler permalink",className:"header-anchor after"},(0,r.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,r.kt)("p",null,"When the OIDC server redirects the browser back to the given callback route, this component handles the response."),(0,r.kt)("h3",{id:"properties-2",style:{position:"relative"}},"Properties",(0,r.kt)("a",{parentName:"h3",href:"#properties-2","aria-label":"properties 2 permalink",className:"header-anchor after"},(0,r.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"onSuccess")),(0,r.kt)("td",{parentName:"tr",align:null},"Required. The function is called when a response is handled successfully. The function is called with a User object.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"onError")),(0,r.kt)("td",{parentName:"tr",align:null},"Required. The function is called when a login fails. The function is called with an OidcClientError.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"children")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. Usually child elements to inform the user that a response is being processed.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[Table 3: Properties of the LoginCallbackHandler component]"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)(i.ZP,{mdxType:"PlaygroundPreview"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"const onSuccess = (user: User) => {\n  // handle success\n  // Usually redirect to a page\n};\nconst onError = (error: OidcClientError) => {\n  // handle error\n};\nreturn (\n  <LoginProvider {...providerProperties}>\n    <LoginCallbackHandler onSuccess={onSuccess} onError={onError}>\n      <div>Logging in...</div>\n    </LoginCallbackHandler>\n  </LoginProvider>\n);\n"))),(0,r.kt)("h3",{id:"sessionendedhandler",style:{position:"relative"}},"SessionEndedHandler",(0,r.kt)("a",{parentName:"h3",href:"#sessionendedhandler","aria-label":"sessionendedhandler permalink",className:"header-anchor after"},(0,r.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,r.kt)("p",null,"This component listens to the session ended signal. It is emitted from the Session poller, if it receives a response indicating the user's session has ended.\nThen the component shows a dialog and forces the user to logout."),(0,r.kt)("h3",{id:"properties-3",style:{position:"relative"}},"Properties",(0,r.kt)("a",{parentName:"h3",href:"#properties-3","aria-label":"properties 3 permalink",className:"header-anchor after"},(0,r.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"content")),(0,r.kt)("td",{parentName:"tr",align:null},"Required. Textual content with properties ",(0,r.kt)("inlineCode",{parentName:"td"},"title"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"text"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"buttonText")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"closeButtonLabelText"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ids")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. Ids for the dialog elements with properties ",(0,r.kt)("inlineCode",{parentName:"td"},"dialog"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"title"),", and ",(0,r.kt)("inlineCode",{parentName:"td"},"text"),". If omitted, ids are created.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"dialogProps")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. Additional ",(0,r.kt)("inlineCode",{parentName:"td"},"DialogProps")," passed to the Dialog")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[Table 4: Properties of the SessionEndedHandler component]"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)(i.ZP,{mdxType:"PlaygroundPreview"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"<SessionEndedHandler\n  content={{\n    title: 'Session has ended!',\n    text: 'Your session on the server has ended. You will be logged out in this window too.',\n    buttonText: 'Logout',\n    closeButtonLabelText: 'Logout',\n  }}\n/>\n"))),(0,r.kt)("h3",{id:"withauthentication",style:{position:"relative"}},"WithAuthentication",(0,r.kt)("a",{parentName:"h3",href:"#withauthentication","aria-label":"withauthentication permalink",className:"header-anchor after"},(0,r.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,r.kt)("p",null,"Component for rendering child components conditionally, depending on is user authenticated or not."),(0,r.kt)("h3",{id:"properties-4",style:{position:"relative"}},"Properties",(0,r.kt)("a",{parentName:"h3",href:"#properties-4","aria-label":"properties 4 permalink",className:"header-anchor after"},(0,r.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"AuthorisedComponent")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. Component to render, if the user is authenticated. The user object is passed to the component")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"UnauthorisedComponent")),(0,r.kt)("td",{parentName:"tr",align:null},"Optional. Component to render, if the user is not authenticated.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[Table 5: Properties of the WithAuthentication component]"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)(i.ZP,{mdxType:"PlaygroundPreview"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},'const HelloUser = ({ user }: { user: User }) => {\n  return <p>Hello, {user.name}!</p>;\n};\n\nconst LoginComponent = () => {\n  return <LoginButton errorText="Login failed. Try again!">Log in</LoginButton>;\n};\n\n<WithAuthentication AuthorisedComponent={HelloUser} UnauthorisedComponent={LoginComponent} />;\n'))),(0,r.kt)("h3",{id:"withauthenticateduser",style:{position:"relative"}},"WithAuthenticatedUser",(0,r.kt)("a",{parentName:"h3",href:"#withauthenticateduser","aria-label":"withauthenticateduser permalink",className:"header-anchor after"},(0,r.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,r.kt)("p",null,"Renders its children only, if the user is authenticated. Uses ",(0,r.kt)("inlineCode",{parentName:"p"},"WithAuthentication"),"."),(0,r.kt)("h3",{id:"properties-5",style:{position:"relative"}},"Properties",(0,r.kt)("a",{parentName:"h3",href:"#properties-5","aria-label":"properties 5 permalink",className:"header-anchor after"},(0,r.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"children")),(0,r.kt)("td",{parentName:"tr",align:null},"React children. A user object is passed to each child")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[Table 6: Properties of the WithAuthenticatedUser component]"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)(i.ZP,{mdxType:"PlaygroundPreview"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"<WithAuthenticatedUser>\n  <p>This is rendered, if the user is authenticated</p>\n</WithAuthenticatedUser>\n"))),(0,r.kt)("h3",{id:"withoutauthenticateduser",style:{position:"relative"}},"WithoutAuthenticatedUser",(0,r.kt)("a",{parentName:"h3",href:"#withoutauthenticateduser","aria-label":"withoutauthenticateduser permalink",className:"header-anchor after"},(0,r.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,r.kt)("p",null,"Renders its children only, if the user is not authenticated. Uses ",(0,r.kt)("inlineCode",{parentName:"p"},"WithAuthentication"),"."),(0,r.kt)("h3",{id:"properties-6",style:{position:"relative"}},"Properties",(0,r.kt)("a",{parentName:"h3",href:"#properties-6","aria-label":"properties 6 permalink",className:"header-anchor after"},(0,r.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"children")),(0,r.kt)("td",{parentName:"tr",align:null},"React children.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"[Table 7: Properties of the WithAuthenticatedUser component]"),(0,r.kt)("td",{parentName:"tr",align:null})))),(0,r.kt)(i.ZP,{mdxType:"PlaygroundPreview"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-jsx"},"<WithoutAuthenticatedUser>\n  <p>This is rendered, if the user is not authenticatedd</p>\n</WithoutAuthenticatedUser>\n"))))}m.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-docs-components-login-components-mdx-531c70aa8182ae6e2632.js.map