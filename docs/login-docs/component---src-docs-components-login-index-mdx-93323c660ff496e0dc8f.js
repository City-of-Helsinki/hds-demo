"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[8172],{33873:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return d},default:function(){return u}});var i=t(63366),a=(t(67294),t(64983)),o=t(44186),r=t(88562),s=t(1076),l=t(80699),c=["components"],d={slug:"/components/login",title:"Login",navTitle:"Login"},h={_frontmatter:d},p=function(e){var n=e.children,t=e.pageContext;return(0,a.kt)(r.default,{pageContext:t},n)};function u(e){var n=e.components,t=(0,i.Z)(e,c);return(0,a.kt)(p,Object.assign({},h,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"introduction",style:{position:"relative"}},"Introduction",(0,a.kt)("a",{parentName:"h2",href:"#introduction","aria-label":"introduction permalink",className:"header-anchor after"},(0,a.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,a.kt)("p",null,"HDS Login components include React components, context and hooks for handling user authorisation, api tokens and session polling. React is not a requirement to use the login modules, but currently, no plain javascript UI components exist."),(0,a.kt)("p",null,"Implementation requires an OIDC provider, which is a server for user authorization. The City of Helsinki uses ",(0,a.kt)(l.Z,{href:"https://github.com/City-of-Helsinki/tunnistamo",mdxType:"ExternalLink"},"Tunnistamo"),", but HDS login components can be used with any compatible OIDC provider."),(0,a.kt)("p",null,"Read more about ",(0,a.kt)(l.Z,{href:"https://auth0.com/intro-to-iam/what-is-openid-connect-oidc",mdxType:"ExternalLink"},"OpenID Connect (OIDC)"),"."),(0,a.kt)("p",null,"In the OIDC login process, the browser window is redirected to the OIDC provider. Authentication is fully handled by the server. That is why HDS does not provide login or registration forms."),(0,a.kt)("p",null,"When the user has been authenticated, the OIDC server redirects back to the service. HDS provides components to handle authentication process initiation and responses."),(0,a.kt)("p",null,"Components:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"a login button with error handling"),(0,a.kt)("li",{parentName:"ul"},"a callback handler for parsing the authentication response"),(0,a.kt)("li",{parentName:"ul"},"React context which exposes user data and other modules to React hooks and components."),(0,a.kt)("li",{parentName:"ul"},"wrappers which conditionally render their children depending on authentication status.")),(0,a.kt)("p",null,"There is no component for logout. It is just a redirection link and any button can be used for it. No error handling is required."),(0,a.kt)("p",null,"Detailed documentation can be found in the ",(0,a.kt)(s.Z,{href:"/components/login/components",mdxType:"InternalLink"},"components")," section."),(0,a.kt)("h2",{id:"requirements",style:{position:"relative"}},"Requirements",(0,a.kt)("a",{parentName:"h2",href:"#requirements","aria-label":"requirements permalink",className:"header-anchor after"},(0,a.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,a.kt)("p",null,"To use an OIDC provider you need a client id, authority and register callback URLs. Contact ",(0,a.kt)("a",{parentName:"p",href:"mailto:xxxx@hel.fi"},"xxxx@hel.fi")," to register your application to Tunnistamo."),(0,a.kt)("h2",{id:"important",style:{position:"relative"}},"Important",(0,a.kt)("a",{parentName:"h2",href:"#important","aria-label":"important permalink",className:"header-anchor after"},(0,a.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,a.kt)("p",null,"HDS Oidc client stores data in the session storage for security reasons. Session storage is not shared across browser windows or tabs, so the user must log in separately to each window."),(0,a.kt)("h2",{id:"example-usage",style:{position:"relative"}},"Example Usage",(0,a.kt)("a",{parentName:"h2",href:"#example-usage","aria-label":"example usage permalink",className:"header-anchor after"},(0,a.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,a.kt)(o.ZP,{mdxType:"PlaygroundPreview"},(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},'// actual properties are omitted from this example to keep it simple\nconst providerProperties = {...}\n\nconst SayHelloIfUserExists = () => {\n  const user = useAuthenticatedUser();\n  if( user ) {\n    <p>Hello, { user.name }!</p>\n  } else {\n    <p>You are not logged in.</p>\n    <LoginButton errorText="Login failed. Try again!">Log in</LoginButton>\n  }\n}\n\n<LoginProvider {...providerProperties}>\n  <SayHelloIfUserExists />\n</LoginProvider>\n\n'))),(0,a.kt)("h2",{id:"using-without-react",style:{position:"relative"}},"Using without React",(0,a.kt)("a",{parentName:"h2",href:"#using-without-react","aria-label":"using without react permalink",className:"header-anchor after"},(0,a.kt)("span",{parentName:"a",className:"hds-anchor-icon hds-icon hds-icon--link hds-icon--size-xs","aria-hidden":"true",style:{verticalAlign:"middle"}}))),(0,a.kt)("p",null,"When React is not used, the beacon and modules can be created and initialized with ",(0,a.kt)("inlineCode",{parentName:"p"},"createLoginSystem(props)"),". Props are the same as passed to ",(0,a.kt)(s.Z,{href:"/components/login/components#loginprovider",mdxType:"InternalLink"},"LoginProvider"),". The function returns a ",(0,a.kt)(s.Z,{href:"/components/login/signals#the-beacon",mdxType:"InternalLink"},"beacon")," instance which holds all modules.\nThere are dozens of utility functions to use without React. See ",(0,a.kt)(s.Z,{href:"/components/login/modules",mdxType:"InternalLink"},"modules")," and ",(0,a.kt)(s.Z,{href:"/components/login/modules",mdxType:"InternalLink"},"signals"),"."))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-docs-components-login-index-mdx-93323c660ff496e0dc8f.js.map